# Darkest Dungeon 3D Prototype - PRD

## 1. 프로젝트 개요

- **프로젝트명**: Darkest Dungeon 3D Prototype
- **장르**: 던전 탐험 + 턴제 전략 RPG
- **플랫폼**: PC (Windows, Unity 2022 LTS 이상)
- **렌더링 파이프라인**: URP (Universal Render Pipeline)
- **목표**: 원작 다키스트 던전의 핵심 시스템을 3D 환경에서 학습용으로 구현

---

## 2. 핵심 기능

### 2.1 전투 시스템 (Battle System)

- **턴제 전투**
    - 캐릭터의 **속도(initiative)**를 기반으로 턴 순서 결정
    - 턴마다 스킬 사용, 방어, 아이템 사용 가능
- **위치 기반 전투**
    - 4인 파티 기준, **전열/후열**에 따라 스킬 사용 범위 제한
    - 적 역시 위치 기반 스킬 보유
- **스킬 시스템**
    - 캐릭터별 고유 스킬 (피해, 버프, 디버프, 회복 포함)
    - `SkillData` ScriptableObject로 데이터 관리
- **상태이상/버프/디버프**
    - 출혈, 중독, 기절, 방어 증가, 회피 증가 등
- **애니메이션/이펙트**
    - 스킬 시전 시 3D 애니메이션 + VFX 적용

### 2.2 맵 이동 기능 (Dungeon Exploration & Movement)

- **노드 기반 던전 구조**
    - Room → Hallway → Room 방식의 절차적 던전 생성
    - `MapGenerator`를 통한 랜덤 맵 배치
- **횡스크롤 이동(3D)**
    - 플레이어 파티가 좌우로 이동
    - 이동 제한: 방과 방 사이의 경로만 이동 가능
- **인터랙션 요소**
    - 방 진입 시 이벤트 발생 (전투, 보물, 함정 등)
    - Hallway 이동 중 랜덤 이벤트 발생 가능

### 2.3 횃불 기능 (Torch System)

- **횃불 게이지 (0~100%)**
    - 시간/이동/전투 시 소모
    - 횃불 아이템 사용 시 회복 가능
- **횃불 효과**
    - **밝음(High Light, 75~100%)**: 적 회피율 감소, 아군 명중률 증가
    - **어두움(Low Light, 0~25%)**: 적 강해짐, 전리품 증가
- **UI 표시**
    - HUD 상단에 횃불 게이지 표시
    - Cinemachine + Post Processing으로 밝기/대기 효과 변화

---

## 3. 추가 기능 (향후 개발)

- **스트레스 시스템**
    - 전투/이벤트 시 스트레스 증가
    - 100 도달 시 ‘광기 상태(Affliction)’ 발생
- **사운드 시스템**
    - 긴장감을 위한 BGM + 상황별 효과음
- **카메라 효과**
    - 전투/이벤트 시 다이내믹 카메라 연출

---

## 4. 기술적 요구사항

1. **데이터 관리**
    - ScriptableObject 기반: 캐릭터, 스킬, 던전, 아이템, 이벤트 데이터 관리
2. **비동기 처리**
    - UniTask로 맵 로딩/씬 전환 최적화
3. **UI 시스템**
    - UGUI + UI Toolkit 혼합 가능
    - 횃불 게이지, HP/Stress Bar, 던전 미니맵 제공

---

## 5. 1주 개발 일정

| 기간 | 구현 내용 |
| --- | --- |
| **Day 1** | 프로젝트 세팅 (씬 구조, 기본 UI, 맵/캐릭터 플레이스홀더 배치) |
| **Day 2** | 맵 이동 시스템 구현 (Room-Hallway 구조, 파티 이동) |
| **Day 3** | 전투 시스템 1차 구현 (턴제, HP, 기본 공격 스킬) |
| **Day 4** | 전투 시스템 보강 (위치 기반 스킬, 간단한 상태이상) |
| **Day 5** | 횃불 시스템 구현 (UI + 게이지 감소/회복, 전투 난이도 연동) |
| **Day 6** | UI/UX 통합 (HUD, 미니맵, 횃불 표시, 전투 UI) |
| **Day 7** | 통합 테스트 및 디버깅 (최소 플레이 루프 완성: 맵 이동 → 전투 → 횃불 관리) |

---

## 6. 성공 지표

- **던전 탐험 → 전투 → 횃불 관리**의 플레이 루프가 3D에서 동작할 것
- 전투(턴제 + 위치 기반), 맵 이동(Room ↔ Hallway), 횃불 시스템이 **최소 기능 수준**으로 구현될 것