# **1. 개요**

맵 지도 시스템은 플레이어가 탐험하는 던전의 구조와 진행 상황을 시각적으로 확인할 수 있도록 한다. 방(Room)과 타일(Tile)로 구성된 복도(Hallway)를 기반으로 구성된 맵 데이터를 UI에 표시하여, 탐험 방향 설정과 이벤트 관리에 도움을 준다.

# **2. 목적**

- 플레이어가 현재 위치와 탐험 경로를 인지할 수 있도록 한다.
- 이미 발견한 구역과 미발견 구역을 구분하여 표시한다.
- 이벤트 발생 여부를 지도에서 직관적으로 확인할 수 있게 한다.

# **3. 기능 요구사항**

**3.1 지도 표시**

- [REQ-MAP-01] 지도의 타일(Room/Tile)에는 플레이어가 발견한 이벤트만 표시된다.
- [REQ-MAP-02] 미발견 타일(Room/Tile)의 이벤트는 빈 상태로 표시된다.
- [REQ-MAP-03] 지도는 2D UI 패널로 표시되며 마우스로 표시 영역 이동 및 확대/축소가 가능하다.
- [REQ-MAP-04] 플레이어가 방에 위치하고 전투 상태가 아니며, 주변에 미발견 방이 있는 경우 특정 확률로 탐지를 하여 주변에 있는 모든 방까지의 타일을 발견 상태로 전환한다.

**3.2 플레이어 위치 표시**

- [REQ-MAP-05] 현재 플레이어의 위치는 지도에 마커 또는 아이콘으로 표시된다.
- [REQ-MAP-06] 플레이어가 이동할 때마다 위치 마커는 실시간으로 갱신된다.

**3.3 이벤트 상태 표시**

- [REQ-MAP-07] 지도는 각 타일의 이벤트 상태를 시각적으로 구분한다.
    - 미발견(Undiscovered) → 빈 칸으로 표시
    - 발견(Discovered) → 아이콘 또는 색상으로 표시
    - 소모(Cleared) → 빈 칸으로 표시
- [REQ-MAP-08] 이벤트 타입(전투, 상자, 강화, 장애물, 아이템)에 따라 다른 아이콘을 사용한다.

**3.4 탐험 기록 유지**

- [REQ-MAP-09] 플레이어가 발견한 타일의 이벤트는 지도에 항상 기록되어 유지된다.
- [REQ-MAP-10] 이미 지나간 타일이더라도 해당 타일의 이벤트 소모가 되지 않았다면 그대로 유지된다.

**3.5 지도 UI 연동**

- [REQ-MAP-11] 지도는 UI 패널에서 열기 기능을 제공한다.
- [REQ-MAP-12] 마우스 조작으로 지도를 이동 및 확대/축소할 수 있다.

# **4. 비기능 요구사항**

- [NFR-MAP-01] 지도 갱신은 실시간으로 수행되어야 하며, 플레이어 이동/이벤트 발생 후 0.5초 이내 반영되어야 한다.
- [NFR-MAP-02] 던전의 크기(타일 수)가 증가하더라도 지도 성능에 영향을 최소화해야 한다.
- [NFR-MAP-03] 새로운 이벤트 타입 추가 시, 지도 아이콘 시스템에 쉽게 확장할 수 있어야 한다.

# **5. 예외처리**

- [EXC-MAP-01] 플레이어 위치 데이터가 없을 경우, 지도에는 위치 마커를 표시하지 않는다.
- [EXC-MAP-02] 타일 데이터가 누락된 경우 해당 좌표는 빈 타일로 표시한다.
- [EXC-MAP-03] 이벤트 타입이 정의되지 않은 경우 으로 표시한다.